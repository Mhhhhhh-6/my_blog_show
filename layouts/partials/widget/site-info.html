{{- $context := .Context -}}
{{- $lastmod := now -}}

{{- if gt (len $context.Site.RegularPages) 0 -}}
    {{- $latestPage := index $context.Site.RegularPages.ByLastmod.Reverse 0 -}}
    {{- $lastmod = $latestPage.Lastmod -}}
{{- end -}}

<section class="widget archives site-info-card">
    <div class="widget-icon">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chart-bar" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M3 12m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"></path>
            <path d="M9 8m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"></path>
            <path d="M15 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"></path>
            <path d="M4 20l14 0"></path>
        </svg>
    </div>
    <h2 class="widget-title section-title">小站资讯</h2>

    <div class="widget-archive--list" style="padding: 10px 24px 24px;">
        
        <div class="archive-item" style="display: flex; justify-content: space-between; align-items: center; padding: 6px 0;">
            <span class="archive-item-date">文章数目</span>
            <span class="archive-item-date">{{ len $context.Site.RegularPages }} 篇</span>
        </div>

        <div class="archive-item" style="display: flex; justify-content: space-between; align-items: center; padding: 6px 0;">
            <span class="archive-item-date">运行时间</span>
            <span class="archive-item-date" id="days">0 天</span>
        </div>

        <div class="archive-item" style="display: flex; justify-content: space-between; align-items: center; padding: 6px 0;">
            <span class="archive-item-date">本站总字数</span>
            {{- $scratch := newScratch -}}
            {{- range $context.Site.RegularPages -}}
                {{- $scratch.Add "wordcount" .WordCount -}}
            {{- end -}}
            <span class="archive-item-date">{{ $scratch.Get "wordcount" }} 字</span>
        </div>

        <div class="archive-item" style="display: flex; justify-content: space-between; align-items: center; padding: 6px 0;">
            <span class="archive-item-date">本站访客数</span>
            <span class="archive-item-date">
                <span id="busuanzi_container_site_uv">
                    <span id="busuanzi_value_site_uv">--</span> 人
                </span>
            </span>
        </div>

        <div class="archive-item" style="display: flex; justify-content: space-between; align-items: center; padding: 6px 0;">
            <span class="archive-item-date">本站总浏览量</span>
            <span class="archive-item-date">
                <span id="busuanzi_container_site_pv">
                    <span id="busuanzi_value_site_pv">--</span> 次
                </span>
            </span>
        </div>

        <div class="archive-item" style="display: flex; justify-content: space-between; align-items: center; padding: 6px 0;">
            <span class="archive-item-date">最后更新</span>
            <span class="archive-item-date">{{ $lastmod.Format "2006-01-02" }}</span>
        </div>
        
    </div>
</section>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script>
    var s1 = '2025-11-23'; 
    s1 = new Date(s1.replace(/-/g, "/"));
    s2 = new Date();
    var days = s2.getTime() - s1.getTime();
    var number_of_days = parseInt(days / (1000 * 60 * 60 * 24));
    document.getElementById('days').innerHTML = number_of_days + " 天";
</script>